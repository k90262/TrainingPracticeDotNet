<html>
    <head>
        <meta charset="UTF-8">

        <script src="jquery-3.4.1.min.js"></script>
        <script src="Ball.js"></script>

        <script>
        
            var count = 10;
            var balls = [];

            var sId = 0;
            var sCount = 0
            // var a = Math.random().toString(16).substr(2, 6);
            // alert(a);

            $(function(){

                $("#btn").click(function(){
                    // google 'html5 canvas'
                    /** @type {CanvasRenderingContext2D} */
                    var ctx = $("#c1")[0].getContext("2d"); // jquery object ( $("#c1") ) to html object( $("#c1")[0] )
                    for (var i=0; i<count; i++) {
                        var x = Math.random() * 500 + 100;
                        var y = Math.random() * 400 + 100;
                        var r = Math.random() * 50 + 20;
                        var c = "#"+Math.random().toString(16).substr(2, 6);
                        var dx = Math.random() * 20 - 10;
                        var dy = Math.random() * 20 - 10;
                        //balls[balls.length] = new Ball(ctx, x, y, r, "blue", 5, 10);
                        balls[i] = new Ball(ctx, x, y, r, c, dx, dy);
                        balls[i].show();
                    }

                    sId = setInterval(()=>{
                        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                        for (var i=0; i<count; i++) {
                            // play by myself
                            // if ( balls[i].x > 0 && balls[i].y > 0 && balls[i].x < ctx.canvas.width && balls[i].y < ctx.canvas.height) {
                                balls[i].move();
                                balls[i].show();
                            // }
                        }
                        // play by myself
                        // if (++sCount > 1000) clearInterval(sId) ;
                    }, 10);
                });
                
            });
        
        </script>

    </head>
    <body>
        <button id="btn">按我</button>
        <canvas id="c1" width="800" height="600" style="background-color: pink;"></canvas> <!--setting width/height in Style will force to scale the canvas, so remove it-->

    </body>
</html>